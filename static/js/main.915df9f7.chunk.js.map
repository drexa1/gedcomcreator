{"version":3,"sources":["instructions-popup-arrow.tsx","instructions-popup-content.tsx","instructions-popup.tsx","instructions-section.tsx","download-templates.tsx","upload-exceptions.tsx","upload-validate-schemas.tsx","upload-validate.tsx","upload-dropzone.tsx","app.tsx","index.tsx"],"names":["Arrow","_ref","direction","onClick","onMouseDown","onMouseUp","hidden","arrowClass","svgPath","_jsx","className","children","width","height","viewBox","d","stroke","strokeWidth","fill","strokeLinecap","strokeLinejoin","InstructionsContent","currentIndex","totalCards","_jsxs","Header","as","Array","from","length","map","_","index","InstructionsPopup","forwardRef","ref","isOpen","setOpen","useState","isClicked","setIsClicked","setCurrentIndex","useEffect","nextSlide","prevSlide","handleMouseDown","handleMouseUp","swipeHandlers","useSwipeable","onSwipedLeft","onSwipedRight","preventScrollOnSwipe","trackMouse","useImperativeHandle","open","Modal","onClose","InstructionsSection","showMessage","instructionsRef","FormattedMessage","id","defaultMessage","formatMessage","useIntl","templatesFileName","templatesFilePath","language","individualsFilename","parentsFilename","relationshipsFilename","fetch","then","response","blob","saveAs","type","header","text","_Fragment","catch","error","console","DownloadTemplates","_instructionsRef$curr","current","UploadError","Error","constructor","message","literal","details","super","this","InvalidFilenamesError","invalidFilenames","filenames","join","TooManyFilesError","filesLength","validateFile","filename","content","validationSchemas","parsedData","Papa","parse","skipEmptyLines","errors","rows","requiredColumns","headers","Object","keys","missingColumns","filter","col","includes","validateColumns","data","uploadValidation","newFiles","files","validFilenames","Set","file","name","add","size","validateFilenames","fileReadPromises","Promise","resolve","reader","FileReader","readAsText","onload","fileContent","result","validFile","onerror","all","results","validFiles","some","UploadDropzone","setFiles","fileInputRef","useRef","useValidationSchemas","i18n","split","HandleFiles","async","e","values","handleUploadClick","_fileInputRef$current","click","onDrop","event","preventDefault","dataTransfer","onDragOver","multiple","onChange","target","style","display","Button","Icon","primary","disabled","App","setMessage","messageVisible","setMessageVisible","msg","Message","info","positive","negative","onDismiss","i18nBundle","es","messages_es","resources_es","pl","messages_pl","resources_pl","navigator","ReactDOM","createRoot","document","getElementById","render","IntlProvider","locale","messages"],"mappings":"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","file":"static/js/main.915df9f7.chunk.js","sourcesContent":["import React from \"react\";\n\ninterface ArrowProps {\n    direction: \"left\" | \"right\";\n    onClick: () => void;\n    onMouseDown: () => void;\n    onMouseUp: () => void;\n    hidden: boolean;\n}\n\nexport const Arrow: React.FC<ArrowProps> = ({ direction, onClick, onMouseDown, onMouseUp, hidden }) => {\n    const arrowClass = direction === \"left\" ? \"left-arrow\" : \"right-arrow\";\n    const svgPath = direction === \"left\" ? \"M15 4l-8 20 8 20\" : \"M9 4l8 20-8 20\";\n    return (\n        <div className={`arrow ${arrowClass} ${hidden ? \"hidden\" : \"\"}`}\n            onClick={onClick}\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}>\n            <svg width=\"80\" height=\"100%\" viewBox=\"0 0 24 48\">\n                <path\n                    d={svgPath}\n                    stroke=\"lightgray\"\n                    strokeWidth=\"2\"\n                    fill=\"none\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n            </svg>\n        </div>\n    );\n};","import React from \"react\";\nimport { Header } from \"semantic-ui-react\";\n\ninterface InstructionsContentProps {\n    currentIndex: number;\n    totalCards: number;\n}\n\nexport const InstructionsContent: React.FC<InstructionsContentProps> = ({ currentIndex, totalCards }) => {\n    return (\n        <div className=\"carousel-content\">\n            <Header as=\"h1\">Card {currentIndex + 1} Header</Header>\n            <div className=\"carousel-body\">\n                This is the content of card {currentIndex + 1}\n            </div>\n            <div className=\"dots-container\">\n                {Array.from({ length: totalCards }).map((_, index) => (\n                    <span\n                        key={index}\n                        className={`dot ${index === currentIndex ? \"active\" : \"\"}`}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n","import {forwardRef, useEffect, useImperativeHandle, useState} from \"react\";\nimport {Modal} from \"semantic-ui-react\";\nimport { useSwipeable } from \"react-swipeable\";\nimport {Arrow} from \"./instructions-popup-arrow\";\nimport {InstructionsContent} from \"./instructions-popup-content\";\n\nexport const InstructionsPopup = forwardRef((_, ref) => {\n    const [isOpen, setOpen] = useState<boolean>(false);\n    const [isClicked, setIsClicked] = useState(false);\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const totalCards = 4;\n\n    useEffect(() => {\n        if (isOpen) {\n            setCurrentIndex(0); // Reset slide index to 0 whenever the modal opens\n        }\n    }, [isOpen]);\n\n    const nextSlide = () => {\n        if (currentIndex < totalCards - 1) {\n            setCurrentIndex(currentIndex + 1);\n        }\n    };\n\n    const prevSlide = () => {\n        if (currentIndex > 0) {\n            setCurrentIndex(currentIndex - 1);\n        }\n    };\n\n    // Handle click feedback\n    const handleMouseDown = () => setIsClicked(true);\n    const handleMouseUp = () => setIsClicked(false);\n\n    const swipeHandlers = useSwipeable({\n        onSwipedLeft: nextSlide,    // swipe left to go to the next slide\n        onSwipedRight: prevSlide,   // swipe right to go back\n        preventScrollOnSwipe: true, // prevents scrolling while swiping\n        trackMouse: true            // allows swipe on desktop too\n    });\n\n    // Exposing the `open` method to parent component via the ref\n    useImperativeHandle(ref, () => ({\n        open: () => setOpen(true),\n    }));\n\n    return (\n        <Modal open={isOpen} onClose={() => setOpen(false)} className=\"instructions-popup\">\n            <div className=\"carousel-wrapper\" {...swipeHandlers}>\n                {/* Left Arrow */}\n                <Arrow direction=\"left\" onClick={prevSlide} onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} hidden={currentIndex === 0}/>\n\n                {/* Main Content */}\n                <InstructionsContent currentIndex={currentIndex} totalCards={totalCards}/>\n\n                {/* Right Arrow */}\n                <Arrow direction=\"right\" onClick={nextSlide} onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} hidden={currentIndex === totalCards - 1}/>\n            </div>\n        </Modal>\n    );\n});\n","import React, {forwardRef, Ref, RefObject} from \"react\";\nimport {FormattedMessage} from \"react-intl\";\nimport {MessageState} from \"./app\";\nimport {DownloadTemplates} from \"./download-templates\";\nimport {InstructionsPopup} from \"./instructions-popup\";\n\nexport const InstructionsSection = forwardRef(\n    (\n        { showMessage, instructionsRef}: {\n            showMessage: (msg: MessageState) => void;\n            instructionsRef: RefObject<{open: () => void}>;\n        },\n        ref: Ref<HTMLDivElement>\n    ) => {\n        return (\n        // INSTRUCTIONS SECTION ----------------------------------------------------------------------------------------\n        <div className=\"instructions-wrapper\" ref={ref}>\n                <h2><FormattedMessage id=\"instructions.h2\" defaultMessage=\"How the tool works\"/></h2>\n                <div className=\"instructions-container\">\n                    <div className=\"instruction-box\" onClick={() => DownloadTemplates({ showMessage })}>\n                        <h3><FormattedMessage id=\"instructions.download.h3\" defaultMessage=\"Download\"/></h3>\n                        <p>\n                            <FormattedMessage\n                                id=\"instructions.download.p\"\n                                defaultMessage=\"Get here the assets.templates to fill-in. You need: individuals, parents, and relationships.\"/>\n                        </p>\n                    </div>\n                    <div className=\"instruction-box\" onClick={() => instructionsRef.current?.open()}>\n                        <h3><FormattedMessage id=\"instructions.fill-in.h3\" defaultMessage=\"Fill-in\"/></h3>\n                        <p>\n                            <FormattedMessage\n                                id=\"instructions.fill-in.p\"\n                                defaultMessage=\"Fill-in each template with the family records. Check here if you have doubts.\"/>\n                        </p>\n                    </div>\n                    <InstructionsPopup ref={instructionsRef}/>\n                    <div className=\"instruction-box\">\n                        <h3><FormattedMessage id=\"instructions.collect.h3\" defaultMessage=\"Collect\"/></h3>\n                        <p>\n                            <FormattedMessage\n                                id=\"instructions.collect.p\"\n                                defaultMessage=\"Collect your family file so you can visualize it anywhere. Know no one? Check this.\"/>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n);\n","import {saveAs} from 'file-saver';\nimport {FormattedMessage, useIntl} from 'react-intl';\nimport language from \"./index\";\nimport {MessageState} from \"./app\";\n\nexport const DownloadTemplates = ({ showMessage }: { showMessage: (msg: MessageState) => void; }) => {\n    const { formatMessage } = useIntl();\n\n    const templatesFileName = formatMessage({ id: \"templates.zip\", defaultMessage: \"templates.zip\" });\n    const templatesFilePath = `${process.env.PUBLIC_URL}/templates/${language}/${templatesFileName}`;\n\n    const individualsFilename = formatMessage({ id: \"individuals.csv\", defaultMessage: \"1-individuals.csv\" });\n    const parentsFilename = formatMessage({ id: \"parents.csv\", defaultMessage: \"2-parents.csv\" });\n    const relationshipsFilename = formatMessage({ id: \"relationships.csv\", defaultMessage: \"3-relationships.csv\" });\n\n    fetch(templatesFilePath)\n        .then((response) => response.blob())\n        .then((blob) => {\n            saveAs(blob, templatesFileName);\n            showMessage({\n                type: \"positive\",\n                header: (\n                    <FormattedMessage\n                        id=\"instructions.templates.downloaded\"\n                        defaultMessage=\"Review your Downloads folder\"/>\n                ),\n                text: (\n                    <>\n                        <FormattedMessage\n                            id=\"instructions.templates.compressed\"\n                            defaultMessage=\"You will find the assets.templates in the compressed file:\"/>&nbsp;\n                        <span>{individualsFilename}</span>,&nbsp;\n                        <span>{parentsFilename}</span>,&nbsp;\n                        <span>{relationshipsFilename}</span>\n                    </>\n                )\n            });\n        })\n        .catch((error) => console.error(\"Download failed:\", error));\n};\n","export class UploadError extends Error {\n    public literal: string;\n    public details: any;\n\n    constructor(message: string, literal: string, details: any) {\n        super(message);\n        this.literal = literal;\n        this.details = details;\n    }\n}\n\nexport class InvalidFilenamesError extends UploadError {\n    constructor(invalidFilenames: string[]) {\n        super(\"These don't seem to be our templates: {filenames}\", \"dropzone.upload.invalid.filenames\", { filenames: invalidFilenames.join(', ') });\n    }\n}\n\nexport class TooManyFilesError extends UploadError {\n    constructor(filesLength: number) {\n        super(\"We only need our 3 templates\", \"dropzone.upload.too.many\", filesLength);\n    }\n}","import {useIntl} from \"react-intl\";\nimport Papa from \"papaparse\";\nimport {InvalidFilenamesError} from \"./upload-exceptions\";\n\nexport const useValidationSchemas = () => {  // custom hook naming convention\n    const i18n = useIntl();\n\n    const individualsFilename = i18n.formatMessage({ id: \"individuals.csv\", defaultMessage: \"1-individuals.csv\" });\n    const parentsFilename = i18n.formatMessage({ id: \"parents.csv\", defaultMessage: \"2-parents.csv\" });\n    const relationshipsFilename = i18n.formatMessage({ id: \"relationships.csv\", defaultMessage: \"3-relationships.csv\" });\n\n    const individualsFileColumns = i18n.formatMessage({\n        id: \"individuals.file.columns\",\n        defaultMessage: \"individual_id, name, surname1, surname2, nickname, gender, birth_date, birth_place, notes\"\n    }).split(\", \");\n    const parentsFileColumns = i18n.formatMessage({\n        id: \"parents.file.columns\",\n        defaultMessage: \"individual_id, father_id, mother_id\"\n    }).split(\", \");\n    const relationshipsFileColumns = i18n.formatMessage({\n        id: \"relationships.file.columns\",\n        defaultMessage: \"husband_id, wife_id, notes\"\n    }).split(\", \");\n\n    // { filenames: required columns }\n    return {\n        individualsFilename: individualsFileColumns,\n        parentsFilename: parentsFileColumns,\n        relationshipsFilename: relationshipsFileColumns\n    };\n};\n\nexport function validateFilenames(files: File[], validFilenames: string[]): void {\n    const invalidFilenames = new Set<string>();\n    for (const file of files) {\n        if (!validFilenames.includes(file.name)) {\n            invalidFilenames.add(file.name);\n        }\n    }\n    if (invalidFilenames.size > 0) {\n        throw new InvalidFilenamesError(Array.from(invalidFilenames));\n    }\n}\n\nexport function validateFile(filename: string, content: string, validationSchemas: Record<string, string[]>) {\n    const parsedData = Papa.parse(content, { header: true, skipEmptyLines: true });\n    if (parsedData.errors.length) {\n        console.error(\"CSV loading errors:\", parsedData.errors);\n        return false;\n    }\n    const rows = parsedData.data as Record<string, string>[];\n    return validateColumns(filename, rows, validationSchemas[filename])\n}\n\nfunction validateColumns(filename: string, rows: Record<string, string>[], requiredColumns: string[]) {\n    // Check for missing columns\n    const headers = Object.keys(rows[0]);\n    const missingColumns = requiredColumns.filter(col => !headers.includes(col));\n    if (missingColumns.length) {\n        const error = `${filename}: the following required columns are missing: ${missingColumns.join(\", \")}`\n        console.error(error);\n        return false;\n    }\n    return true;\n}\n","import {validateFile, validateFilenames} from \"./upload-validate-schemas\";\nimport {TooManyFilesError} from \"./upload-exceptions\";\n\nexport const uploadValidation = (newFiles: FileList | null, files: File[], validationSchemas: Record<string, string[]>) => {\n    if (!newFiles || newFiles.length === 0) return null;\n\n    // Validate number of uploaded files\n    if (newFiles.length + files.length > Object.keys(validationSchemas).length) {\n        throw new TooManyFilesError(newFiles.length);\n    }\n\n    // Validate filenames\n    validateFilenames(Array.from(newFiles), Object.keys(validationSchemas))\n\n    // Basic schema validation\n    const fileReadPromises = Array.from(newFiles).map(file => {\n        return new Promise<File | null>((resolve) => {\n            const reader = new FileReader();\n            reader.readAsText(file, \"UTF-8\");\n            reader.onload = () => {\n                const fileContent = reader.result as string;\n                const validFile = validateFile(file.name, fileContent, validationSchemas);\n                if (validFile) {\n                    resolve(file);\n                } else {\n                    resolve(null);\n                }\n            };\n            reader.onerror = () => {\n                console.error(\"Error reading file:\", file.name);\n                // setErrors([\"Error reading file:\" + file.name])  TODO: add to errors bundle\n                resolve(null); // Resolve as null to exclude invalid files\n            };\n        });\n    });\n\n    // Wait for all file validations to complete\n    Promise.all(fileReadPromises).then(results => {\n        const validFiles = results.filter((file): file is File => file !== null);\n        const invalidFiles = Array.from(newFiles)\n            .filter((file: File) => !validFiles.some(validFile => validFile.name === file.name))\n            .map(file => `'${file.name}'`)\n            .join(\", \");\n        if (invalidFiles) {\n            // setErrors([\"Files had errors. You can check them in the browser console\"])  TODO: add to errors bundle\n        }\n        // Validate number of files\n        if (!validFiles || validFiles.length < 3 || validFiles.length > 3) {\n            console.error(\"Wrong number of uploaded files...\")\n            return null  // TODO: reject(new Error(`Invalid file format: ${file.name}`));\n        }\n        // (event.target as HTMLInputElement).value = ''; // Reset the file input\n        return validFiles;\n    });\n}\n","import React, {ChangeEvent, DragEvent, useRef, useState} from \"react\";\nimport {FormattedMessage} from \"react-intl\";\nimport {Button, Icon} from \"semantic-ui-react\";\nimport {uploadValidation} from \"./upload-validate\";\nimport {MessageState} from \"./app\";\nimport {useValidationSchemas} from \"./upload-validate-schemas\";\nimport {UploadError} from \"./upload-exceptions\";\n\nexport const UploadDropzone = ({ showMessage }: { showMessage: (message: MessageState) => void }) => {\n    const [files, setFiles] = useState<File[]>([]);\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\n    const validationSchemas = useValidationSchemas();\n\n    const handleUploadClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    const handleUploadDrop = async (event: DragEvent<HTMLDivElement>) => {\n        event.preventDefault();\n        await HandleFiles(event.dataTransfer.files);\n    };\n\n    const handleFileChange = async (event: ChangeEvent<HTMLInputElement>) => {\n        await HandleFiles(event.target.files);\n    };\n\n    const HandleFiles = async (newFiles: FileList | null) => {\n        try {\n            if (newFiles) {\n                const validFiles = uploadValidation(newFiles, files, validationSchemas);\n                if (validFiles) {\n                    setFiles([...files, ...validFiles]);  // add to previous\n                }\n            }\n        } catch (e) {\n            if (e instanceof UploadError) {\n                showMessage({\n                    type: \"negative\",\n                    header: (<FormattedMessage id={ e.literal } defaultMessage={ e.message } values={ e.details }/>),\n                    text: null\n                });\n            }\n        }\n    };\n\n    return (\n        <div className=\"ui upload-container\">\n            <div\n                className=\"ui dropzone\"\n                onClick={handleUploadClick}\n                onDrop={handleUploadDrop}\n                onDragOver={(e) => e.preventDefault()}>\n                <input type=\"file\" multiple ref={fileInputRef} onChange={handleFileChange} style={{ display: \"none\" }}/>\n                <p>\n                    <FormattedMessage id=\"dropzone.p.drag-n-drop\" defaultMessage=\"Drag & drop here your filled assets.templates, or \"/>\n                    <span><FormattedMessage id=\"dropzone.p.browse-them\" defaultMessage=\"browse them\"/></span>\n                </p>\n                <p><FormattedMessage id=\"dropzone.p.files-needed\" defaultMessage=\"We need all the 3 files\"/></p>\n                <Button>\n                    <Icon name=\"upload\"/>\n                    <FormattedMessage id=\"dropzone.button.browse-files\" defaultMessage=\"Browse files\"/>\n                </Button>\n            </div>\n            <Button primary disabled={true}>\n                <FormattedMessage id=\"dropzone.button.submit\" defaultMessage=\"Submit\"/>\n            </Button>\n        </div>\n    );\n};","import React, {ReactNode, useRef, useState} from 'react';\nimport {Header, Icon, Message} from \"semantic-ui-react\";\nimport {FormattedMessage} from \"react-intl\";\nimport {InstructionsSection} from \"./instructions-section\";\nimport {UploadDropzone} from \"./upload-dropzone\";\n\nexport interface MessageState {\n    type: \"positive\" | \"negative\";\n    header: ReactNode;\n    text: ReactNode;\n}\n\nexport const App = () => {\n    const [message, setMessage] = useState<MessageState | null>(null);\n    const [messageVisible, setMessageVisible] = useState(false);\n\n    const instructionsRef = useRef<{ open: () => void }>(null);\n\n    // Function to show and fade out the message\n    const showMessage = (msg: MessageState) => {\n        setMessage(msg);\n        setMessageVisible(true);\n    };\n\n    return (\n        <div className=\"body\">\n\n            {/* MESSAGES SECTION ----------------------------------------------------------------------------------- */}\n            {message && (\n                <div className={`message-container ${messageVisible ? \"expanded\" : \"collapsed\"}`}>\n                    <Message\n                        info\n                        positive={message.type === \"positive\"}\n                        negative={message.type === \"negative\"}\n                        onDismiss={() => setMessage(null)}>\n                            <Message.Header>{message.header}</Message.Header>\n                            <p>{message.text}</p>\n                    </Message>\n                </div>\n            )}\n\n            {/* HEADER SECTION ------------------------------------------------------------------------------------- */}\n            <Header as=\"h1\">\n                <FormattedMessage id=\"header.h1\" defaultMessage=\"Digitalize all your genealogy records into a family file\"/>\n            </Header>\n            <p>\n                <FormattedMessage id=\"header.p\" defaultMessage=\"It is (and will always be) free up to 50 relatives. Above 50 relatives, $0.5 per relative\"/>&nbsp;\n                <Icon name=\"credit card\"/>\n            </p>\n\n            {/* INSTRUCTIONS SECTION ------------------------------------------------------------------------------- */}\n            <InstructionsSection showMessage={showMessage} instructionsRef={instructionsRef}/>\n\n            {/* UPLOAD SECTION ------------------------------------------------------------------------------------- */}\n            <UploadDropzone showMessage={showMessage}/>\n\n        </div>\n    );\n}\n","import ReactDOM from 'react-dom/client';\nimport {App} from './app';\nimport './assets/styles/index.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport messages_es from './i18n/literals/es.json';\nimport messages_pl from './i18n/literals/pl.json';\nimport resources_es from \"./i18n/resources/es.json\";\nimport resources_pl from \"./i18n/resources/pl.json\";\nimport {IntlProvider} from \"react-intl\";\n\nconst i18nBundle = {\n    es: {\n        ...messages_es,\n        ...resources_es\n    },\n    pl: {\n        ...messages_pl,\n        ...resources_pl\n    }\n};\n\nconst language = navigator.language && navigator.language.split(/[-_]/)[0];\n\nReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(\n    <IntlProvider locale={language} messages={i18nBundle[language]}>\n        <App/>\n    </IntlProvider>\n);\nexport default language"],"sourceRoot":""}